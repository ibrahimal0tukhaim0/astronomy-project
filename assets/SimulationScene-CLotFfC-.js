var K=Object.defineProperty;var Q=(s,e,n)=>e in s?K(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var W=(s,e,n)=>Q(s,typeof e!="symbol"?e+"":e,n);import{u as Z,a as k,T as C,r as o,b as U,c as g,j as t,V as M,C as N,D as _,A as P,E as ee,B as V,d as I,e as D,L as te,g as se,S as G,N as re,R as B,f as ne,h as ie,i as oe,k as ae,l as ce}from"./index-C9qJZBkS.js";const L=s=>s===Object(s)&&!Array.isArray(s)&&typeof s!="function";function v(s,e){const n=Z(a=>a.gl),i=k(C,L(s)?Object.values(s):s);return o.useLayoutEffect(()=>{e==null||e(i)},[e]),o.useEffect(()=>{if("initTexture"in n){let a=[];Array.isArray(i)?a=i:i instanceof U?a=[i]:L(i)&&(a=Object.values(i)),a.forEach(r=>{r instanceof U&&n.initTexture(r)})}},[n,i]),o.useMemo(()=>{if(L(s)){const a={};let r=0;for(const u in s)a[u]=i[r++];return a}else return i},[s,i])}v.preload=s=>k.preload(C,s);v.clear=s=>k.clear(C,s);const ue=25,le=.5;function de(){const s=v("./textures/shooting_star_trail.webp"),[e,n]=o.useState([]),i=o.useRef(0),c=()=>{const u=Math.random()*Math.PI*2,d=Math.acos(2*Math.random()-1),f=4e3*Math.sin(d)*Math.cos(u),l=Math.abs(4e3*Math.sin(d)*Math.sin(u))+500,w=4e3*Math.cos(d),p=new M(f,l,w),R=new M((Math.random()-.5)*2e3,(Math.random()-.5)*500,(Math.random()-.5)*2e3),b=new M().subVectors(R,p).normalize().multiplyScalar(150+Math.random()*100),y={id:Math.random(),position:p,velocity:b,scale:200+Math.random()*300,life:1,maxLife:4};n(m=>[...m,y])};g(({clock:r})=>{const u=r.getElapsedTime();u-i.current>le&&e.length<ue&&Math.random()>.1&&(c(),i.current=u)});const a=r=>{n(u=>u.filter(d=>d.id!==r))};return t.jsx("group",{children:e.map(r=>t.jsx(fe,{data:r,texture:s,onDeath:()=>a(r.id)},r.id))})}function fe({data:s,texture:e,onDeath:n}){const i=o.useRef(null),c=o.useRef(s.life);return g((a,r)=>{if(!i.current)return;i.current.position.addScaledVector(s.velocity,r),c.current-=r/s.maxLife;const u=i.current.material;if(u){const f=Math.sin(c.current*Math.PI);u.opacity=f*.8,u.needsUpdate=!0}const d=i.current.position.clone().add(s.velocity);i.current.lookAt(d),c.current<=0&&n()}),t.jsxs("mesh",{ref:i,position:s.position,scale:[s.scale,s.scale*.1,1],children:[t.jsx("planeGeometry",{args:[1,5]}),t.jsx("meshBasicMaterial",{map:e,transparent:!0,opacity:0,blending:P,side:_,depthWrite:!1,color:new N("#aaddff")})]})}const pe=["./sounds/thunder.ogg","https://actions.google.com/sounds/v1/weather/thunder_heavy.ogg","https://actions.google.com/sounds/v1/weather/thunder_rumble.ogg"],he=o.memo(function(){const e=v("./textures/lightning_branch.webp"),[n,i]=o.useState([]),c=o.useRef(0),[a,r]=o.useState(!1),[u,d]=o.useState(!1),f=o.useRef(null),l=o.useRef([]),w=o.useRef([]),p=o.useRef([]),R=3;o.useEffect(()=>{const m=window.AudioContext||window.webkitAudioContext,h=new m;f.current=h;const F=async j=>{try{const T=await(await fetch(j)).arrayBuffer(),S=await h.decodeAudioData(T);l.current.push(S)}catch{console.warn("Audio Asset Failed:",j)}};pe.forEach(F);const x=()=>{h.state==="suspended"?h.resume().then(()=>d(!0)):d(!0),window.removeEventListener("click",x),window.removeEventListener("touchstart",x),window.removeEventListener("keydown",x)};return window.addEventListener("click",x),window.addEventListener("touchstart",x),window.addEventListener("keydown",x),()=>{p.current.forEach(j=>{try{j.stop(),j.disconnect()}catch{}}),p.current=[],h&&h.close(),window.removeEventListener("click",x),window.removeEventListener("touchstart",x),window.removeEventListener("keydown",x),w.current.forEach(j=>clearTimeout(j)),w.current=[]}},[]),o.useEffect(()=>{const m=h=>{var x;const F=h.detail.muted;r(F),d(!0),!F&&((x=f.current)==null?void 0:x.state)==="suspended"&&f.current.resume()};return window.addEventListener("ambience-toggle",m),()=>window.removeEventListener("ambience-toggle",m)},[]);const b=m=>{if(a||!u||!f.current||l.current.length===0)return;const h=f.current,F=l.current[Math.floor(Math.random()*l.current.length)];if(h.state==="closed")return;if(p.current=p.current.filter(S=>S.context.state!=="closed"),p.current.length>=R){const S=p.current.shift();if(S)try{S.stop(),S.disconnect()}catch{}}const x=h.createBufferSource();x.buffer=F;const j=h.createStereoPanner(),E=Math.max(-1,Math.min(1,m/2e3));j.pan.value=E;const T=h.createGain();T.gain.value=.6,x.connect(j),j.connect(T),T.connect(h.destination),x.start(0),p.current.push(x)};g(({clock:m})=>{const h=m.getElapsedTime();if(h>c.current&&n.length<3){const x=Math.random()*Math.PI*2,j=Math.acos(2*Math.random()-1),E=4500*Math.sin(j)*Math.cos(x),T=4500*Math.sin(j)*Math.sin(x),S=4500*Math.cos(j),O=new M(E,T,S),$=3e3+Math.random()*3e3,J=new M($,$,1),Y={id:Math.random(),position:O,rotation:new ee(0,0,Math.random()*Math.PI*2),scale:J,life:1,opacity:0};i(X=>[...X,Y]),b(E),c.current=h+70}});const y=m=>{i(h=>h.filter(F=>F.id!==m))};return t.jsx("group",{children:n.map(m=>t.jsx(me,{data:m,texture:e,onComplete:()=>y(m.id)},m.id))})}),me=o.memo(function({data:e,texture:n,onComplete:i}){const c=o.useRef(null),a=o.useRef(1),r=o.useMemo(()=>{const u=new V,d=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),f=new Float32Array([0,0,1,0,1,1,0,1]),l=new Uint16Array([0,1,2,0,2,3]);return u.setAttribute("position",new I(d,3)),u.setAttribute("uv",new I(f,2)),u.setIndex(new I(l,1)),u},[]);return o.useEffect(()=>()=>{r.dispose()},[r]),g((u,d)=>{if(!c.current)return;if(a.current-=d*3,a.current<=0){i();return}let f=Math.sin(a.current*20)*.5+.5;f*=a.current,c.current.opacity=f}),t.jsxs("mesh",{position:e.position,rotation:e.rotation,scale:e.scale,geometry:r||void 0,children:[!r&&t.jsx("planeGeometry",{args:[1,1]}),t.jsx("meshBasicMaterial",{ref:c,map:n,transparent:!0,opacity:0,blending:P,side:_,depthWrite:!1,toneMapped:!1,color:new N("#88ccff").multiplyScalar(2)})]})},(s,e)=>s.data.id===e.data.id),H=document.createElement("style");H.innerHTML=`
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }
`;document.head.appendChild(H);function xe(){const s=o.useRef(null),[e,n]=o.useState(!1),i=o.useRef(0),c="rigil",a=D.find(r=>r.id===c);return g(({clock:r},u)=>{const d=r.getElapsedTime(),l=d%240;if(l<5&&!e?(n(!0),i.current=d,s.current&&(s.current.position.set(0,10,0),s.current.visible=!0)):l>20&&e&&(n(!1),s.current&&(s.current.visible=!1)),e&&s.current&&a){const w=new M(...a.initialPosition),p=s.current.position.clone(),R=new M().subVectors(w,p).normalize(),b=p.distanceTo(w),y=500*u;b>10&&(s.current.position.add(R.multiplyScalar(y)),s.current.lookAt(w))}}),a?t.jsxs("group",{ref:s,visible:!1,children:[t.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[t.jsx("cylinderGeometry",{args:[.5,1,4,8]}),t.jsx("meshStandardMaterial",{color:"#FFFFFF",metalness:.8,roughness:.2})]}),t.jsx("pointLight",{distance:50,intensity:5,color:"orange",position:[0,0,-2]})]}):null}const q=new te;function A({scale:s=1,texturePath:e,rotationSpeed:n,roughness:i=.3,metalness:c=.2,emissiveColor:a="#FFFFFF",emissiveIntensity:r=.05}){const u=v(`./${e}`),d=o.useRef(null);return o.useEffect(()=>()=>u.dispose(),[u]),g((f,l)=>{d.current&&(d.current.rotation.y+=l*n)}),t.jsxs("mesh",{ref:d,scale:s,castShadow:!0,receiveShadow:!0,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:u,color:"#FFFFFF",roughness:i,metalness:c,emissiveMap:u,emissive:a,emissiveIntensity:r})]})}function ge({scale:s=1}){const e=v("./textures/saturn_surface.webp"),n=v("./textures/saturn_rings.webp"),i=o.useRef(null),c=o.useRef(null),a=o.useRef(null);return o.useEffect(()=>()=>{e.dispose(),n.dispose()},[]),g((r,u)=>{c.current&&(c.current.rotation.y+=u*2.5),a.current&&(a.current.rotation.z-=u*.02)}),t.jsxs("group",{ref:i,children:[t.jsxs("mesh",{ref:c,scale:[s*1.1,s*.9,s*1.1],castShadow:!0,receiveShadow:!0,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:e,color:"#FFFFFF",roughness:.3,metalness:.2,emissiveMap:e,emissive:"#C0A080",emissiveIntensity:.24})]}),t.jsxs("mesh",{ref:a,rotation:[-Math.PI/2,0,0],scale:s,receiveShadow:!0,castShadow:!0,children:[t.jsx("ringGeometry",{args:[1.4,2.3,128]}),t.jsx("meshStandardMaterial",{map:n,transparent:!0,alphaMap:n,side:_,depthWrite:!1,opacity:.95,color:"#DDDDDD",emissiveMap:n,emissive:"#C0A080",emissiveIntensity:.36})]})]})}function ye({scale:s=1}){const e=v("./textures/sun_surface.webp");o.useEffect(()=>(e.wrapS=B,e.wrapT=B,()=>e.dispose()),[e]);const n=o.useRef(null);return g((i,c)=>{n.current&&(n.current.rotation.y+=c*.08)}),t.jsxs("mesh",{ref:n,scale:s,castShadow:!1,receiveShadow:!1,children:[t.jsx("sphereGeometry",{args:[5,64,64]}),t.jsx("meshStandardMaterial",{map:e,color:"#FFFFFF",roughness:.2,metalness:0,emissiveMap:e,emissive:"#FFDD00",emissiveIntensity:2,toneMapped:!1})]})}function Fe({scale:s=1}){const e=v("./textures/earth_daymap.webp"),n=v("./textures/earth_clouds.webp"),i=o.useRef(null),c=o.useRef(null);return o.useEffect(()=>()=>{e.dispose(),n.dispose()},[]),g((a,r)=>{i.current&&(i.current.rotation.y+=r*.15),c.current&&(c.current.rotation.y+=r*.02)}),t.jsxs("group",{ref:i,children:[t.jsxs("mesh",{scale:s,castShadow:!0,receiveShadow:!0,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:e,color:"#FFFFFF",roughness:.3,metalness:.2,emissiveMap:e,emissive:"#112244",emissiveIntensity:.18})]}),t.jsxs("mesh",{ref:c,scale:s*1.01,castShadow:!0,receiveShadow:!0,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:n,transparent:!0,opacity:.9,side:_,depthWrite:!1,blending:re})]})]})}function je({scale:s=1,color:e="#FFFFFF",lightColor:n="#FFFFFF",glowIntensity:i=2,pulsationSpeed:c=0,roughness:a=.2}){const r=o.useRef(null),u=o.useRef(null);return g(({clock:d},f)=>{if(r.current&&(r.current.rotation.y+=f*.05),c>0&&u.current){const l=d.getElapsedTime(),w=1+Math.sin(l*c)*.15;u.current.intensity=i*w}}),t.jsxs("group",{children:[t.jsx("pointLight",{ref:u,intensity:i,distance:1e4,decay:.8,color:n}),t.jsxs("mesh",{ref:r,scale:s,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{color:e,roughness:a,metalness:.1,emissive:e,emissiveIntensity:2,toneMapped:!1})]})]})}function we({scale:s=1}){const[e,n]=o.useState(null),i="#C88B3A";o.useEffect(()=>{new C().load("https://upload.wikimedia.org/wikipedia/commons/e/e2/Jupiter.jpg",r=>{r.anisotropy=16,r.colorSpace=G,n(r)},void 0,r=>console.error("Jupiter Texture Failed",r))},[]);const c=o.useRef(null);return g((a,r)=>{c.current&&(c.current.rotation.y+=r*.15)}),t.jsxs("mesh",{ref:c,scale:s,castShadow:!0,receiveShadow:!0,children:[t.jsx("sphereGeometry",{args:[1,128,128]}),t.jsx("meshStandardMaterial",{map:e,color:e?"#FFFFFF":i,roughness:.3,metalness:.2,emissiveMap:e||void 0,emissive:i,emissiveIntensity:.12,toneMapped:!1})]})}function ve({scale:s=1}){const[e,n]=o.useState(null),i="#ACE5EE";o.useEffect(()=>{new C().load("https://upload.wikimedia.org/wikipedia/commons/3/3d/Uranus2.jpg",r=>{r.anisotropy=16,r.colorSpace=G,n(r)},void 0,r=>console.error("Uranus Texture Failed",r))},[]);const c=o.useRef(null);return g((a,r)=>{c.current&&(c.current.rotation.z+=r*.15)}),t.jsxs("mesh",{ref:c,scale:s,castShadow:!0,receiveShadow:!0,rotation:[Math.PI/2+.14,0,0],children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:e,color:e?"#FFFFFF":i,roughness:.3,metalness:.2,emissiveMap:e||void 0,emissive:i,emissiveIntensity:.18})]})}function Se({scale:s=1}){const e=v("./textures/al_tariq_real.webp");return t.jsxs("group",{children:[t.jsx("sprite",{scale:[s*15,s*15,1],children:t.jsx("spriteMaterial",{map:e,toneMapped:!1,depthWrite:!1,blending:P,color:"#FFFFFF"})}),t.jsx("sprite",{scale:[s*25,s*25,1],children:t.jsx("spriteMaterial",{map:e,toneMapped:!1,depthWrite:!1,blending:P,opacity:.3,color:"#00FFFF"})})]})}function Me({scale:s=1}){const e=v("./textures/blue_supergiant_surface.webp");o.useEffect(()=>()=>e.dispose(),[]);const n=o.useRef(null);return g((i,c)=>{n.current&&(n.current.rotation.y+=c*.05)}),t.jsxs("mesh",{ref:n,scale:s,castShadow:!1,receiveShadow:!1,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:e,color:"#FFFFFF",roughness:.2,metalness:.1,emissiveMap:e,emissive:"#FFFFFF",emissiveIntensity:2,toneMapped:!1})]})}function Re({scale:s=1,texturePath:e,color:n="#FFFFFF",dimensions:i=[1,1,1],name:c}){const[a,r]=o.useState(null),u=n==="#FFFFFF"?"#BBBBBB":n;o.useEffect(()=>{const f=new C(q),w=`./${e.startsWith("/")?e.slice(1):e}`;return f.load(w,p=>{p.colorSpace=G,p.wrapS=B,p.wrapT=B,p.repeat.set(2,2),p.needsUpdate=!0,r(p)},void 0,p=>{}),()=>{a&&a.dispose()}},[e,c]);const d=o.useRef(null);return g((f,l)=>{d.current&&(d.current.rotation.y+=l*.2,d.current.rotation.x+=l*.1)}),t.jsxs("group",{children:[t.jsx("pointLight",{color:"#a3ccf5",intensity:2,distance:40,decay:2}),t.jsxs("mesh",{ref:d,scale:[s*i[0],s*i[1],s*i[2]],castShadow:!0,receiveShadow:!0,children:[t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshStandardMaterial",{map:a||void 0,displacementMap:a||void 0,displacementScale:a?.08:0,bumpMap:a||void 0,bumpScale:.02,emissiveMap:a||void 0,emissive:"#222222",emissiveIntensity:a?.1:0,color:u,roughness:.9,metalness:0,flatShading:!1})]})]})}function be({scale:s=1,name:e}){const[n,i]=o.useState(null);o.useEffect(()=>(new C(q).load("./textures/shooting_star_trail.webp",r=>i(r),void 0,r=>{}),()=>{n&&n.dispose()}),[e]);const c=o.useRef(null);return g((a,r)=>{c.current&&(c.current.rotation.y+=r*.1)}),t.jsx("group",{children:n&&t.jsxs("mesh",{position:[s*10,0,0],rotation:[0,0,-Math.PI/2],renderOrder:-2,children:[t.jsx("cylinderGeometry",{args:[.5*s,6*s,s*25,32,1,!0]}),t.jsx("meshBasicMaterial",{map:n,color:"#AADDFF",opacity:.3,transparent:!0,blending:P,depthWrite:!1,side:_})]})})}function Ee(s){const{data:e,onSelect:n,dateRef:i,isSelected:c}=s,a=o.useRef(null),r=o.useRef(null),[u,d]=o.useState(!1);o.useEffect(()=>{var y,m;["canopus","bennu"].includes(e.id)&&console.log(`ðŸŒŸ Rendering Object: ${e.id}`,{visible:(y=r.current)==null?void 0:y.visible,position:(m=r.current)==null?void 0:m.position})},[e.id]);const f=e.science.scale,l=u||c?f*1.1:f;g((y,m)=>{if(r.current&&i.current){const h=se(e.id,i.current,s.isMarathonMode);r.current.position.set(h[0],h[1],h[2]);const F=y.camera.position.distanceTo(r.current.position);["sun","al-tariq","sirius"].includes(e.id)||(F>5e4?r.current.visible=!1:r.current.visible=!0)}if(a.current){const F=l;a.current.rotation.y+=m*.2,a.current.scale.lerp(new M(F,F,F),10*m)}});const w=new M(...e.initialPosition);let p=l*1.25;["mercury","moon","pluto"].includes(e.id)&&(p=l*1.5),e.id==="sirius"&&(p=120);let R=f*1.5,b=f*1.52;return e.id==="sirius"&&(p=2,R=200,b=202),t.jsxs("group",{ref:r,name:e.id,position:w,onPointerOver:y=>{e.id!=="sirius"&&(y.stopPropagation(),d(!0),document.body.style.cursor="pointer")},onPointerOut:()=>{e.id!=="sirius"&&(d(!1),document.body.style.cursor="auto")},onClick:y=>{e.id!=="sirius"&&(y.stopPropagation(),n(e))},children:[t.jsxs("mesh",{ref:a,name:`${e.id}-hitbox`,scale:p,onClick:y=>{e.id!=="sirius"&&(y.stopPropagation(),n(e))},onPointerOver:()=>{e.id!=="sirius"&&(document.body.style.cursor="pointer",d(!0))},onPointerOut:()=>{e.id!=="sirius"&&(document.body.style.cursor="auto",d(!1))},visible:e.id!=="sirius",children:[t.jsx("sphereGeometry",{args:[1,16,16]}),t.jsx("meshBasicMaterial",{transparent:!0,opacity:0,depthWrite:!1,depthTest:e.id==="sirius",color:"pink",side:_})]}),e.id==="saturn"&&t.jsx("group",{children:t.jsx(ge,{scale:l})}),e.id==="jupiter"&&t.jsx("group",{children:t.jsx(we,{scale:l})}),e.id==="earth"&&t.jsx("group",{children:t.jsx(Fe,{scale:l})}),e.id==="sun"&&t.jsxs(t.Fragment,{children:[t.jsx("pointLight",{intensity:2,distance:1e4,decay:.5,color:"#FFF4E6",castShadow:!0,"shadow-bias":-1e-4,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),t.jsx("group",{children:t.jsx(ye,{scale:l})})]}),e.id==="uranus"&&t.jsx("group",{children:t.jsx(ve,{scale:l})}),["alnitak","alnilam","mintaka"].includes(e.id)&&t.jsxs("group",{children:[t.jsx("pointLight",{intensity:1.5,distance:500,decay:2,color:"#4488ff"}),t.jsx(Me,{scale:l})]}),e.id==="al-tariq"&&t.jsxs("group",{children:[t.jsx("pointLight",{intensity:100,distance:6e3,decay:1.5,color:"#00FFFF"}),t.jsx(Se,{scale:l})]}),["canopus","arcturus","rigil","vega","capella"].includes(e.id)&&t.jsx(je,{scale:e.science.scale,color:e.science.color,lightColor:e.science.lightColor,glowIntensity:e.science.glowIntensity,pulsationSpeed:e.science.pulsationSpeed,roughness:e.science.roughness}),e.id==="sirius"&&t.jsx(Te,{scale:e.science.scale}),e.id==="mars"&&t.jsx(A,{scale:l,texturePath:"textures/mars_surface.webp",rotationSpeed:.12,roughness:.8,metalness:.05,emissiveColor:"#C05030",emissiveIntensity:.24}),e.id==="venus"&&t.jsx(A,{scale:l,texturePath:"textures/venus_atmosphere.webp",rotationSpeed:.05,roughness:1,metalness:0,emissiveColor:"#E6C288",emissiveIntensity:.18}),e.id==="mercury"&&t.jsx(A,{scale:l,texturePath:"textures/mercury_surface.webp",rotationSpeed:.05,roughness:.9,metalness:.1,emissiveColor:"#A0A0A0",emissiveIntensity:.18}),e.id==="neptune"&&t.jsx(A,{scale:l,texturePath:"textures/neptune_surface.webp",rotationSpeed:.12,roughness:.4,metalness:.1,emissiveColor:"#4b70dd",emissiveIntensity:.18}),e.id==="pluto"&&t.jsx(A,{scale:l,texturePath:"textures/pluto_surface.webp",rotationSpeed:.02,roughness:.8,metalness:.05,emissiveColor:"#D0D0D0",emissiveIntensity:.18}),e.id==="moon"&&t.jsx(A,{scale:l,texturePath:"textures/moon_surface.webp",rotationSpeed:.05,roughness:.9,metalness:.05,emissiveColor:"#BBBBBB",emissiveIntensity:.18}),e.id==="halley"&&t.jsx(be,{scale:l,name:e.id}),["ceres","vesta","pallas","juno","eros","ida","gaspra","bennu","ryugu"].includes(e.id)&&t.jsx(Re,{scale:l,texturePath:e.science.texture||`textures/${e.id}_surface.png`,color:e.science.color,dimensions:e.science.shapeScale,name:e.id}),(u||c)&&t.jsxs("mesh",{rotation:[-Math.PI/2,0,0],raycast:()=>null,children:[t.jsx("ringGeometry",{args:[R,b,64]}),t.jsx("meshBasicMaterial",{color:"#4facfe",side:_,toneMapped:!1})]})]})}function Te({scale:s}){const e=v("./textures/sirius_real.webp");return t.jsxs("group",{children:[t.jsx("pointLight",{intensity:250,distance:8e3,decay:1,color:"#dceeff"}),t.jsx("sprite",{scale:[s,s,1],raycast:()=>null,children:t.jsx("spriteMaterial",{map:e,color:"#FFFFFF",blending:P,depthWrite:!1,toneMapped:!1})})]})}class z extends ie.Component{constructor(){super(...arguments);W(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n){console.warn("Visual Effect Failed:",n)}render(){return this.state.hasError?null:this.props.children}}const _e=2;function Pe(){const s=v("https://upload.wikimedia.org/wikipedia/commons/6/60/ESO_-_Milky_Way.jpg");return t.jsxs("mesh",{scale:[9e4,9e4,9e4],children:[" ",t.jsx("sphereGeometry",{args:[1,64,64]}),t.jsx("meshBasicMaterial",{map:s,side:ne,toneMapped:!1})]})}const Ce="line";function Ae(){const s=o.useRef(null),e=["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune","pluto"];return o.useEffect(()=>{s.current&&s.current.children.forEach((n,i)=>{if(n instanceof oe){const c=n.material,a=.5;c.opacity=0,ae.to(c,{opacity:a,duration:2,delay:i*.15,ease:"power2.out"})}})},[]),t.jsx("group",{ref:s,rotation:[Math.PI/2,0,0],children:D.map(n=>{if(!e.includes(n.id))return null;const i=n.science.orbitRadius,a=new ce(0,0,i,i,0,2*Math.PI,!1,0).getPoints(128),r=new V().setFromPoints(a);return t.jsx(Ce,{geometry:r,onUpdate:u=>{u.computeLineDistances()},children:t.jsx("lineDashedMaterial",{color:"#44aaff",dashSize:3,gapSize:1,scale:1,transparent:!0,opacity:0,depthWrite:!1,blending:P})},`orbit-${n.id}`)})})}function Le({onSelect:s,isPaused:e,onDateChange:n,isARMode:i=!1,isMarathonMode:c=!1}){const a=o.useRef(new Date),r=o.useRef(0);return g((u,d)=>{if(e)return;const f=Math.min(d,.1),l=_e;a.current=new Date(a.current.getTime()+f*1e3*l),u.clock.elapsedTime-r.current>.06&&(n(new Date(a.current)),r.current=u.clock.elapsedTime)}),t.jsxs(t.Fragment,{children:[t.jsx(o.Suspense,{fallback:null,children:!i&&t.jsx(Pe,{})}),t.jsx("ambientLight",{intensity:1.5,color:"#FFFFFF"}),t.jsx("directionalLight",{position:[100,100,100],intensity:2,color:"#FFFFFF",castShadow:!1}),t.jsx("directionalLight",{position:[-100,50,-100],intensity:1.5,color:"#AAAAFF",castShadow:!1}),t.jsx(z,{children:t.jsx(de,{})}),t.jsx(z,{children:t.jsx(o.Suspense,{fallback:null,children:t.jsx(he,{})})}),t.jsx(xe,{}),t.jsx(Ae,{}),D.map(u=>t.jsx(Ee,{data:u,onSelect:s,dateRef:a,isMarathonMode:i?!1:c||!1},u.id))]})}export{Le as default};
